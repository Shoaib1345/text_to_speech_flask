<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StorePro AI - Next Gen Shopping</title>
    <link rel="stylesheet" href="static/css/index.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Intro Screen -->
    <div class="intro-screen" id="introScreen">
        <div class="logo-intro">
            <div class="logo-circle logo-circle-1"></div>
            <div class="logo-circle logo-circle-2"></div>
            <div class="logo-circle logo-circle-3"></div>
            <div class="logo-center">üõçÔ∏è</div>
        </div>
        <div class="intro-text">StorePro AI</div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="glass-card brand-card">
                <div class="brand-icon">ü§ñ</div>
                <div class="brand-title">StorePro AI</div>
                <div class="brand-subtitle">Next-Gen Shopping Assistant</div>
            </div>

            <div class="glass-card quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-grid">
                    <div class="action-btn" onclick="quickAction('Show me your product catalog')">
                        <div class="action-icon">üì¶</div>
                        <div class="action-text">
                            <div class="action-label">Browse Products</div>
                            <div class="action-desc">View entire catalog</div>
                        </div>
                    </div>
                    <div class="action-btn" onclick="quickAction('What are the current prices?')">
                        <div class="action-icon">üíé</div>
                        <div class="action-text">
                            <div class="action-label">Price Check</div>
                            <div class="action-desc">Compare pricing</div>
                        </div>
                    </div>
                    <div class="action-btn" onclick="quickAction('Track my order')">
                        <div class="action-icon">üìç</div>
                        <div class="action-text">
                            <div class="action-label">Order Status</div>
                            <div class="action-desc">Track shipment</div>
                        </div>
                    </div>
                    <div class="action-btn" onclick="quickAction('Delivery options available')">
                        <div class="action-icon">üöÄ</div>
                        <div class="action-text">
                            <div class="action-label">Fast Delivery</div>
                            <div class="action-desc">Shipping options</div>
                        </div>
                    </div>
                    <div class="action-btn" onclick="quickAction('Recommend trending products')">
                        <div class="action-icon">‚ú®</div>
                        <div class="action-text">
                            <div class="action-label">Recommendations</div>
                            <div class="action-desc">AI-powered picks</div>
                        </div>
                    </div>
                    <div class="action-btn" onclick="quickAction('Customer support help')">
                        <div class="action-icon">üí¨</div>
                        <div class="action-text">
                            <div class="action-label">Get Support</div>
                            <div class="action-desc">24/7 assistance</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="glass-card chat-area">
            <div class="chat-header">
                <div class="header-left">
                    <h2>AI Assistant</h2>
                    <p>Powered by advanced intelligence</p>
                </div>
                <div class="status-badge">
                    <div class="status-dot"></div>
                    <span>Online</span>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="welcome-card">
                    <h3>üëã Welcome to StorePro AI</h3>
                    <p>I'm your intelligent shopping assistant. Ask me anything about products, pricing, orders, delivery, or get personalized recommendations. How can I help you today?</p>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="input-wrapper">
                    <input
                        type="text"
                        class="chat-input"
                        id="chatInput"
                        placeholder="Type your message here..."
                        onkeypress="handleKeyPress(event)"
                    />
                    <button class="send-btn" onclick="sendMessage()">
                        ‚û§
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Hide intro after 2.5 seconds
        setTimeout(() => {
            document.getElementById('introScreen').classList.add('fade-out');
            setTimeout(() => {
                document.getElementById('introScreen').style.display = 'none';
                document.getElementById('chatInput').focus();
            }, 800);
        }, 2500);

        function quickAction(text) {
            document.getElementById('chatInput').value = text;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();

            if (!text) return;

            addMessage(text, 'user');
            input.value = '';

            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'block';
            scrollToBottom();

            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ question: text })
                });

                const data = await response.json();
                typingIndicator.style.display = 'none';
                addMessage(data.answer, 'bot');

            } catch (error) {
                typingIndicator.style.display = 'none';
                addMessage('‚ö†Ô∏è Connection error. Please try again.', 'bot');
            }
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'message user-msg' : 'message bot-msg';
            messageDiv.textContent = text;
            container.appendChild(messageDiv);
            scrollToBottom();
        }

        function scrollToBottom() {
            const container = document.getElementById('chatMessages');
            container.scrollTop = container.scrollHeight;
        }
    </script>
</body>
</html>